gen	flag_q2	=	1	if	q2	==	99
gen	flag_q3	=	1	if	q3	==	9
gen	flag_q11=	1	if	q11	==	99
gen	flag_q12=	1	if	q12	==	99
gen	flag_q13=	1	if	q13	==	9
gen	flag_q14=	1	if	q14	==	9
gen	flag_q15=	1	if	q15	==	9
gen	flag_q16=	1	if	q16	==	9

gen	flag_q17a=1	if	q17a	==	99
gen	flag_q17b=1	if	q17b	==	99
gen	flag_q17c=1	if	q17c	==	99
gen	flag_q17d=1	if	q17d	==	99
gen	flag_q17e=1	if	q17e	==	99
gen	flag_q18a=1	if	q18a	==	99
gen	flag_q18b=1	if	q18b	==	99
gen	flag_q18c=1	if	q18c	==	99
gen	flag_q18d=1	if	q18d	==	99
gen	flag_q18e=1	if	q18e	==	99
gen	flag_q19a=1	if	q19a	==	99
gen	flag_q19b=1	if	q19b	==	99
gen	flag_q19c=1	if	q19c	==	99
gen	flag_q19d=1	if	q19d	==	99
gen	flag_q19e=1	if	q19e	==	99

gen	flag_q21a=1	if	q21a	==	99
gen	flag_q21b=1	if	q21b	==	99
gen	flag_q21c=1	if	q21c	==	99
gen	flag_q21d=1	if	q21d	==	99
gen	flag_q21e=1	if	q21e	==	99
gen	flag_q21f=1	if	q21f	==	99
gen	flag_q21g=1	if	q21g	==	99
gen	flag_q21h=1	if	q21h	==	99

gen	flag_q24=1	if	q24	==	9
gen	flag_q25=1	if	q25	==	99
gen	flag_q26=1	if	q26	==	9

gen	flag_q29=1	if	q29	==	9
gen	flag_q30=1	if	q30	==	9
gen	flag_q31=1	if	q31	==	9
gen	flag_q32a=1	if	q32a	==	99
gen	flag_q32b=1	if	q32b	==	99
gen	flag_q32c=1	if	q32c	==	99
gen	flag_q32d=1	if	q32d	==	99
gen	flag_q32e=1	if	q32e	==	99
gen	flag_q33a=1	if	q33a	==	99
gen	flag_q33b=1	if	q33b	==	99
gen	flag_q33c=1	if	q33c	==	99
gen	flag_q33d=1	if	q33d	==	99
gen	flag_q33e=1	if	q33e	==	99
gen	flag_q34=1	if	q34	==	99
gen	flag_q34a1=1 if	q34a1	==	99
gen	flag_q34a2=1 if	q34a2	==	99
gen	flag_q37=1 if	q37	==	9

gen	flag_q40a	=1	if	q40a	==	9
gen	flag_q40b	=1	if	q40b	==	9
gen	flag_q40c	=1	if	q40c	==	9

gen	flag_q42	=1	if	q42	==	9
gen	flag_q47a	=1	if	q47a	==	99
gen	flag_q47b	=1	if	q47b	==	99
gen	flag_q47c	=1	if	q47c	==	99
gen	flag_q47d	=1	if	q47d	==	99
gen	flag_q48a	=1	if	q48a	==	9
gen	flag_q48b	=1	if	q48b	==	9
gen	flag_q48c	=1	if	q48c	==	9

gen	flag_q54a	=1	if	q54a	==	9
gen	flag_q54b	=1	if	q54b	==	9
gen	flag_q54c	=1	if	q54c	==	9

gen	flag_qsd3	=1	if	qsd3	==	9
gen	flag_qsd3b	=1	if	qsd3b	==	9

gen flag_q1a_merged=1 if q1a_merged==99
gen flag_q1b_merged=1 if q1b_merged==99
gen flag_q1c_merged=1 if q1c_merged==99

recode	flag_q2	.	=	0
recode	flag_q3	.	=	0
recode	flag_q11	.	=	0
recode	flag_q12	.	=	0
recode	flag_q13	.	=	0
recode	flag_q14	.	=	0
recode	flag_q15	.	=	0
recode	flag_q16	.	=	0
recode	flag_q17a	.	=	0
recode	flag_q17b	.	=	0
recode	flag_q17c	.	=	0
recode	flag_q17d	.	=	0
recode	flag_q17e	.	=	0
recode	flag_q18a	.	=	0
recode	flag_q18b	.	=	0
recode	flag_q18c	.	=	0
recode	flag_q18d	.	=	0
recode	flag_q18e	.	=	0
recode	flag_q19a	.	=	0
recode	flag_q19b	.	=	0
recode	flag_q19c	.	=	0
recode	flag_q19d	.	=	0
recode	flag_q19e	.	=	0
recode	flag_q21a	.	=	0
recode	flag_q21b	.	=	0
recode	flag_q21c	.	=	0
recode	flag_q21d	.	=	0
recode	flag_q21e	.	=	0
recode	flag_q21f	.	=	0
recode	flag_q21g	.	=	0
recode	flag_q21h	.	=	0
recode	flag_q24	.	=	0
recode	flag_q25	.	=	0
recode	flag_q26	.	=	0
recode	flag_q29	.	=	0
recode	flag_q30	.	=	0
recode	flag_q31	.	=	0
recode	flag_q32a	.	=	0
recode	flag_q32b	.	=	0
recode	flag_q32c	.	=	0
recode	flag_q32d	.	=	0
recode	flag_q32e	.	=	0
recode	flag_q33a	.	=	0
recode	flag_q33b	.	=	0
recode	flag_q33c	.	=	0
recode	flag_q33d	.	=	0
recode	flag_q33e	.	=	0
recode	flag_q34	.	=	0
recode	flag_q34a1	.	=	0
recode	flag_q34a2	.	=	0
recode	flag_q37	.	=	0
recode	flag_q40a	.	=	0
recode	flag_q40b	.	=	0
recode	flag_q40c	.	=	0
recode	flag_q42	.	=	0
recode	flag_q47a	.	=	0
recode	flag_q47b	.	=	0
recode	flag_q47c	.	=	0
recode	flag_q47d	.	=	0
recode	flag_q48a	.	=	0
recode	flag_q48b	.	=	0
recode	flag_q48c	.	=	0
recode	flag_q54a	.	=	0
recode	flag_q54b	.	=	0
recode	flag_q54c	.	=	0
recode	flag_qsd3	.	=	0
recode	flag_qsd3b	.	=	0
recode	flag_q1a_m	.	=	0
recode	flag_q1b_m	.	=	0
recode	flag_q1c_m	.	=	0

sum flag_q2 flag_q3 flag_q11 flag_q12 flag_q13 flag_q14 flag_q15 flag_q16 flag_q17a flag_q17b flag_q17c flag_q17d flag_q17e flag_q18a flag_q18b flag_q18c
sum flag_q18d flag_q18e flag_q19a flag_q19b flag_q19c flag_q19d flag_q19e flag_q21a flag_q21b flag_q21c flag_q21d flag_q21e flag_q21f flag_q21g flag_q21h
sum flag_q24 flag_q25 flag_q26 flag_q29 flag_q30 flag_q31 flag_q32a flag_q32b flag_q32c flag_q32d flag_q32e flag_q33a flag_q33b flag_q33c flag_q33d
sum flag_q33e flag_q34 flag_q34a1 flag_q34a2 flag_q37 flag_q40a flag_q40b flag_q40c flag_q42 flag_q47a flag_q47b flag_q47c flag_q47d flag_q48a flag_q48b
sum flag_q48c flag_q54a flag_q54b flag_q54c flag_qsd3 flag_qsd3b flag_q1a_m flag_q1b_m flag_q1c_m

gen test1= (flag_q2+	flag_q3+	flag_q11+	flag_q12+	flag_q13+	flag_q14+	flag_q15+	flag_q16+	flag_q17a+	flag_q17b+	flag_q17c+	flag_q17d+	flag_q17e+	flag_q18a+	flag_q18b+	flag_q18c+	flag_q18d+	flag_q18e+	flag_q19a+	flag_q19b+	flag_q19c+	flag_q19d+	flag_q19e+	flag_q21a+	flag_q21b+	flag_q21c+	flag_q21d+	flag_q21e+	flag_q21f+	flag_q21g+	flag_q21h+	flag_q24+	flag_q25+	flag_q26+	flag_q29+	flag_q30+	flag_q31+	flag_q32a+	flag_q32b+	flag_q32c+	flag_q32d+	flag_q32e+	flag_q33a+	flag_q33b+	flag_q33c+	flag_q33d+	flag_q33e+	flag_q34+	flag_q34a1+	flag_q34a2+	flag_q37+	flag_q40a+	flag_q40b+	flag_q40c+	flag_q42+	flag_q47a+	flag_q47b+	flag_q47c+	flag_q47d+	flag_q48a+	flag_q48b+	flag_q48c+	flag_q54a+	flag_q54b+	flag_q54c+	flag_qsd3+	flag_qsd3b+	flag_q1a_m+	flag_q1b_m+	flag_q1c_m)

***Analyses: Basically it works like for the British one; the Rsq are smaller, but the std errors are smaller too as compared
***to when no weights or when using the weights provided by the survey company
tab  qpq5
tab  qpq5 [iw=test]
tab  qpq5 [iw= wtpost]
tab  qpq5 [iw=test] if  qpq5<6
tab  qpq5 [iw= wtpost] if  qpq5<6
tab  qpq5  if  qpq5<6
tab  qpq5 [iw=test] if  qpq5<6
gen test2=test1
replace test2=. if voted==.
tab  qpq5 [iw=test2] if  qpq5<6
tab voted [iw=test2 ]
tab age
gen age_sq=age*age
logit voted  age age_sq [iw=1+test2]
logit voted  age age_sq
logit voted  age age_sq edu
logit voted  age age_sq edu [iw=test1]
logit voted  age age_sq edu [iw=test2]
logit voted  age age_sq edu [iw=1+test2]
logit voted  age age_sq edu [iw= wtpost]
logit voted  age age_sq edu [iw= wtpostges]
logit voted  age age_sq edu [iw= test1]
logit voted  age age_sq edu [iw= test1*test1]
logit voted  age age_sq edu [iw= wtpostges]
logit voted  age age_sq edu [iw=1+ test1]
logit voted  age age_sq edu [iw=1+ test2]

***Hur & Achen model: y=a1*age+a2*edu+a3*age_sq +a4*age*edu

gen age_edu=age *edu
logit voted  age age_sq edu   age_edu [iw=1+ test2]
logit voted  age age_sq edu   age_edu [iw=1+ test1]
logit voted  age age_sq edu   age_edu [iw=test1*test1]
logit voted  age age_sq edu   age_edu [iw= wtpreges]
logit voted  age age_sq edu   age_edu [iw= wtpostges]
logit voted  age age_sq edu   age_edu [iw= 1+test1]
logit voted  age age_sq edu   age_edu [iw=  wtpost]
logit voted  age age_sq edu   age_edu [iw=  wtpostges]
logit voted  age age_sq edu   age_edu [iw= 1+test1]

***new analyses: not working that great

use "C:\Users\Deuta\Desktop\Survey missing data project\uwo_2010_medw_full_weights_2_mod_august_5_DK.dta", clear
tab test1
tab test2
corr test1 test2
tab voted
tab voted [iw=test2]
tab voted [iw=test2/5.6641]
tab voted [iw=1+test2/5.6641]
tab voted [iw=(1+test2)/5.6641]
tab voted [iw=(1+test2)]
tab voted [iw=(1+test2)/6.6641]
tab voted [iw=test2/5.6641]
gen test3=test2/5.6641
gen test4=(1+test2)/6.6641
probit  voted age age_sq edu  age_edu
probit  voted age age_sq edu  age_edu [iw=test3]
probit  voted age age_sq edu  age_edu [iw=test4]
probit  voted age age_sq edu   [iw=test4]
probit  voted age age_sq edu  age_edu [iw= test1]
probit  voted age age_sq edu  age_edu [iw= 1+test1]
tab voted [iw=(1+test1)/6.6641]
probit  voted age age_sq edu  age_edu [iw= (1+test1)/6.6641]
probit  voted age age_sq edu  age_edu [iw= 1+test1/6.6641]
tab voted [iw=1+test2/5.6641]
logit  voted age age_sq edu  age_edu [iw= 1+test1/6.6641]
logit  voted age age_sq edu  age_edu [iw= (1+test1)/6.6641]
probit  voted age age_sq edu  age_edu [iw= (1+test1)/6.6641]
probit  voted age age_sq edu  age_edu [iw= (1+test2)/6.6641]
probit  voted age age_sq edu  age_edu [iw= test1/5.6641]
probit  voted age age_sq edu  age_edu [iw= 1+test1/5.6641]
tab voted [iw=1+test1/6.6641]
tab voted [iw=1+test1/5.6641]
probit  voted age age_sq edu  age_edu [iw= (1+test2)/6.6641]
probit  voted age age_sq edu   [iw= (1+test2)/6.6641]
probit  voted age age_sq edu  age_edu [iw=  test3]
probit  voted age age_sq edu  age_edu [iw=  test4]
probit  voted age age_sq edu  age_edu
probit  voted age age_sq edu
probit  voted age age_sq edu  [iw=  test4]
sum test2
sum test3
sum test4
probit  voted age age_sq edu  [iw=  test4]
tab voted [iw=test1*test1]
tab voted [iw=test1*test1/139.5801]
probit  voted age age_sq edu  [iw= test1*test1/139.5801]
probit  voted age age_sq edu  [iw= 1+ test1*test1/139.5801]
probit  voted age age_sq edu age_edu  [iw= test1*test1/139.5801]
tab voted [iw=1+ test1*test1/139.5801]
tab voted [iw=1+ test1*test1]
tab voted [iw=(1+ test1*test1)/140.5801]
probit  voted age age_sq edu age_edu  [iw= (1+ test1*test1)/140.5801]
probit  voted age age_sq edu  [iw= (1+ test1*test1)/140.5801]
probit  voted age age_sq edu age_edu
probit  voted age age_sq edu  [iw= (1+ test1*test1)/140.5801]
probit  voted age age_sq edu  [iw= test3]
probit  voted age age_sq edu  [iw= test4]
probit  voted age age_sq edu age_edu  [iw= test4]
probit  voted age age_sq edu age_edu  [iw= wtpostges]
probit  voted age age_sq edu age_edu  [iw= test4]
probit  voted age age_sq edu  age_edu [iw= (1+ test1*test1)/140.5801]
sum wtpostges
probit  voted age age_sq edu  age_edu [iw= (1+ test1*test1)/140.5801]
probit  voted age age_sq edu  age_edu [iw= (1+test2)/6.6641]
probit  voted age age_sq edu age_edu  [iw= test4]
probit  voted age age_sq edu age_edu  [iw= test3]
probit  voted age age_sq edu age_edu  [iw= test45]
probit  voted age age_sq edu age_edu  [iw= test5]
tab voted [iw= test1]
tab voted [iw= test1/5.6838]
logit voted age [iw= test1/5.6838]
logit voted age age_sq  [iw= test1/5.6838]
logit voted age age_sq  edu [iw= test1/5.6838]
logit voted age age_sq  edu age_edu [iw= test1/5.6838]
logit voted age age_sq  edu age_edu [iw= (1+test1)/6.6838]
logit voted age age_sq  edu  [iw= (1+test1)/6.6838]
logit voted age age_sq    [iw= (1+test1)/6.6838]
logit voted age    [iw= (1+test1)/6.6838]
logit voted age  edu   [iw= (1+test1)/6.6838]
logit voted age  edu age_edu   [iw= (1+test1)/6.6838]
logit voted age  edu age_edu
tab voted
tab voted [iw=test1]
tab voted [iw=test1*test1*test1]
tab voted [iw=(1 +test1*test1*test1)/5374.6602]
logit voted age [iw=(1 +test1*test1*test1)/5374.6602]
logit voted age age_sq  [iw=(1 +test1*test1*test1)/5374.6602]
logit voted age age_sq edu [iw=(1 +test1*test1*test1)/5374.6602]
logit voted age age_sq edu age_edu  [iw=(1 +test1*test1*test1)/5374.6602]
logit voted age age_sq edu age_edu
tab voted [iw=1+test1*2]
tab voted [iw=(1+test1*2)/12.3754]
logit voted age age_sq edu age_edu  [iw=(1+test1*2)/12.3754]
tab voted [iw=1+test1*2/12.3754]
sum test1
tab voted [iw=test1/5.852362]
logit voted age age_sq edu age_edu  [iw=5.852362]
logit voted age age_sq edu age_edu  [iw=test1/5.852362]
gen test6=test1+1
sum test6
logit voted age age_sq edu age_edu  [iw=test6/6.852362 ]
logit voted age age_sq edu age_edu
probit voted age age_sq edu age_edu
probit voted age age_sq edu age_edu [iw=test6/6]
probit voted age age_sq edu age_edu [iw=test6/6.852362]
probit voted age age_sq edu age_edu
probit voted age age_sq edu age_edu [iw=1+test1]
probit voted age age_sq edu age_edu [iw=5+test1]
probit voted age age_sq edu age_edu [iw=5]
probit voted age age_sq edu age_edu [iw=10]
tab voted [iw=10]
probit voted age age_sq edu age_edu [iw=test6/6.852362]
probit voted age age_sq edu  [iw=test6/6.852362]
probit voted age age_sq edu
tab  q4
tab  q4, nol
probit voted q4 age age_sq edu if q4!=99
probit voted q4 age age_sq edu age_edu  if q4!=99
probit voted q4 age age_sq edu age_edu  if q4!=99 [iw=test6/6.8523]
probit voted age age_sq edu  [iw=test6/6.852362]
probit voted age age_sq edu
tab voted [iw=test6/6.852362]
gen test7=test6/6.852362
tab test7
sum test7
sum test7 if voted!=.
sum test7 if voted!=. & edu!=.
drop test7
tab voted [iw=test6]
tab voted [iw=test6/6.6641]
tab voted
tab voted [iw=test6/6.6641]
gen test7
gen test7=test6/6.6641
tab voted [iw=test7]
probit voted age age_sq edu
probit voted age age_sq edu age_edu
probit voted age age_sq edu age_edu [iw=test7]
tab test1
tab test2
probit voted age age_sq edu age_edu [iw=test7] if test2!=67
probit voted age age_sq edu age_edu [iw=test7] if test2<65
probit voted age age_sq edu age_edu [iw=test7] if test2<64
probit voted age age_sq edu age_edu [iw=test7] if test2<63
probit voted age age_sq edu age_edu [iw=test7] if test2<60
probit voted age age_sq edu age_edu [iw=test7] if test2<50
probit voted age age_sq edu age_edu [iw=test7] if test2<40
probit voted age age_sq edu age_edu [iw=test7] if test2<30
probit voted age age_sq edu age_edu [iw=test7]
probit voted age age_sq edu [iw=test7]
probit voted age age_sq edu age_edu [iw=test7]
probit voted age age_sq edu
probit voted age age_sq edu age_edu
probit voted age age_sq edu age_edu [iw=test7]
corr test7  q4 if q4!=99
corr test7  q5 if q5!=99
logit voted q5 if q5!=99 [iw=test7]
logit voted q5 if q5!=99
tab qpq5 if qpq3==1
tab qpq5 if qpq3==1 [iw=test7]
tab voted [iw=test7]
sum test1 test2 test3 test4 test6 test7


probit voted age age_sq edu age_edu
probit voted age age_sq edu age_edu [iw=test7]
probit voted age age_sq edu age_edu [iw= wtpre]
probit voted age age_sq edu age_edu [iw= wtpreges]
probit voted age age_sq edu age_edu [iw= wtpost]
probit voted age age_sq edu age_edu [iw= wtpostges]
sum  wtpre wtpost wtpostges wtpreges


. probit voted age age_sq edu age_edu

Iteration 0:   log likelihood = -412.23961  
Iteration 1:   log likelihood = -385.36373  
Iteration 2:   log likelihood = -384.65621  
Iteration 3:   log likelihood = -384.65263  
Iteration 4:   log likelihood = -384.65263  

Probit regression                                 Number of obs   =        783
                                                  LR chi2(4)      =      55.17
                                                  Prob > chi2     =     0.0000
Log likelihood = -384.65263                       Pseudo R2       =     0.0669

------------------------------------------------------------------------------
       voted |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0268132   .0247673     1.08   0.279    -.0217297    .0753562
      age_sq |  -.0001284   .0002519    -0.51   0.610    -.0006221    .0003653
         edu |   .2899954   .1918348     1.51   0.131    -.0859938    .6659847
     age_edu |   .0016584   .0044195     0.38   0.707    -.0070036    .0103204
       _cons |  -.7872787   .6073646    -1.30   0.195    -1.977691     .403134
------------------------------------------------------------------------------

. probit voted age age_sq edu age_edu [iw=test7]

Iteration 0:   log likelihood =  -520.6041  
Iteration 1:   log likelihood = -486.66705  
Iteration 2:   log likelihood =  -485.8887  
Iteration 3:   log likelihood = -485.88221  
Iteration 4:   log likelihood = -485.88221  

Probit regression                                 Number of obs   =        783
                                                  LR chi2(4)      =      69.44
                                                  Prob > chi2     =     0.0000
Log likelihood = -485.88221                       Pseudo R2       =     0.0667

------------------------------------------------------------------------------
       voted |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |    .015404   .0262073     0.59   0.557    -.0359614    .0667694
      age_sq |  -.0000574   .0002698    -0.21   0.831    -.0005861    .0004713
         edu |   .2625968   .2063074     1.27   0.203    -.1417583    .6669519
     age_edu |   .0050217   .0052679     0.95   0.340    -.0053032    .0153466
       _cons |  -.9841066   .6164561    -1.60   0.110    -2.192338    .2241251
------------------------------------------------------------------------------

. probit voted age age_sq edu age_edu [iw= wtpre]

Iteration 0:   log likelihood = -403.28759  
Iteration 1:   log likelihood = -377.00365  
Iteration 2:   log likelihood = -376.42112  
Iteration 3:   log likelihood = -376.41892  
Iteration 4:   log likelihood = -376.41892  

Probit regression                                 Number of obs   =        783
                                                  LR chi2(4)      =      53.74
                                                  Prob > chi2     =     0.0000
Log likelihood = -376.41892                       Pseudo R2       =     0.0666

------------------------------------------------------------------------------
       voted |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |    .007424    .024395     0.30   0.761    -.0403893    .0552374
      age_sq |  -.0000135   .0002386    -0.06   0.955    -.0004813    .0004542
         edu |   .2060932   .1817493     1.13   0.257    -.1501288    .5623153
     age_edu |   .0035827   .0039892     0.90   0.369     -.004236    .0114015
       _cons |  -.2517852   .6335648    -0.40   0.691    -1.493549    .9899791
------------------------------------------------------------------------------

. probit voted age age_sq edu age_edu [iw= wtpreges]

Iteration 0:   log likelihood = -444.30982  
Iteration 1:   log likelihood = -395.59988  
Iteration 2:   log likelihood = -393.69855  
Iteration 3:   log likelihood = -393.68122  
Iteration 4:   log likelihood = -393.68122  

Probit regression                                 Number of obs   =        783
                                                  LR chi2(4)      =     101.26
                                                  Prob > chi2     =     0.0000
Log likelihood = -393.68122                       Pseudo R2       =     0.1139

------------------------------------------------------------------------------
       voted |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0291171   .0259992     1.12   0.263    -.0218405    .0800747
      age_sq |  -.0002261   .0002477    -0.91   0.361    -.0007115    .0002593
         edu |   .1309509   .1896372     0.69   0.490    -.2407312     .502633
     age_edu |   .0075546    .004327     1.75   0.081    -.0009261    .0160353
       _cons |  -1.091529   .6783289    -1.61   0.108    -2.421029     .237971
------------------------------------------------------------------------------

. probit voted age age_sq edu age_edu [iw= wtpost]

Iteration 0:   log likelihood = -522.73107  
Iteration 1:   log likelihood = -473.80002  
Iteration 2:   log likelihood =  -473.0622  
Iteration 3:   log likelihood =  -473.0594  
Iteration 4:   log likelihood =  -473.0594  

Probit regression                                 Number of obs   =        783
                                                  LR chi2(4)      =      99.34
                                                  Prob > chi2     =     0.0000
Log likelihood =  -473.0594                       Pseudo R2       =     0.0950

------------------------------------------------------------------------------
       voted |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0100759   .0238152     0.42   0.672     -.036601    .0567529
      age_sq |   -.000035   .0002259    -0.15   0.877    -.0004777    .0004077
         edu |   .1605904   .1780708     0.90   0.367    -.1884219    .5096027
     age_edu |   .0067621   .0038696     1.75   0.081    -.0008222    .0143463
       _cons |  -1.054017   .6399774    -1.65   0.100     -2.30835    .2003154
------------------------------------------------------------------------------

. probit voted age age_sq edu age_edu [iw= wtpostges]

Iteration 0:   log likelihood = -520.40037  
Iteration 1:   log likelihood = -454.33547  
Iteration 2:   log likelihood = -452.53361  
Iteration 3:   log likelihood = -452.52933  
Iteration 4:   log likelihood = -452.52933  

Probit regression                                 Number of obs   =        783
                                                  LR chi2(4)      =     135.74
                                                  Prob > chi2     =     0.0000
Log likelihood = -452.52933                       Pseudo R2       =     0.1304

------------------------------------------------------------------------------
       voted |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0201675   .0252764     0.80   0.425    -.0293732    .0697082
      age_sq |  -.0001373   .0002346    -0.58   0.559    -.0005972    .0003226
         edu |   .1088174   .1915776     0.57   0.570    -.2666677    .4843026
     age_edu |   .0094558   .0042311     2.23   0.025      .001163    .0177487
       _cons |  -1.384099   .6843017    -2.02   0.043    -2.725305   -.0428918
------------------------------------------------------------------------------

. sum  wtpre wtpost wtpostges wtpreges

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
       wtpre |      1016    1.000794    .6494342   .1164329    4.65941
      wtpost |       809    1.000078    .7596879   .1208749   6.104286
   wtpostges |       809    .9997905    .9391493         .2          5
    wtpreges |      1016    1.000679    .8500524         .2          5

probit voted age age_sq edu
probit voted age age_sq edu [iw=test7]
probit voted age age_sq edu [iw= wtpre]
probit voted age age_sq edu [iw= wtpost]
probit voted age age_sq edu [iw= wtpreges]
probit voted age age_sq edu [iw= wtpostges]

***More analyses -- DK weight performs the same as the best weight in the survey for reported correlated of voting
use "C:\Users\Deuta\Desktop\Survey missing data project\uwo_2010_medw_full_weights_2_mod_august_5_relabeled.dta", clear
use "C:\Users\Deuta\Desktop\Survey missing data project\uwo_2010_medw_full_weights_2_mod_august_5_DK.dta", clear
gen modeified_voted=voted * test7
tab modeified_voted
gen new_voted=modeified_voted
replace new_voted=1 if modeified_voted >.5
replace new_voted=0 if modeified_voted <.5
tab new_voted
tab voted
tab modeified_voted
drop new_voted
gen new_voted=modeified_voted
tab new_voted
replace new_voted =1 if modeified_voted >.5
tab new_voted
drop new_voted
gen new_voted=modeified_voted
replace new_voted =1 if modeified_voted >.5 & voted!=.
tab new_voted
replace new_voted =0 if modeified_voted <.5 & voted!=.
tab new_voted
logit new_voted age age_sq age_edu
logit voted age age_sq age_edu
tab voted [iw=test7]
reg modeified_voted  age age_sq age_edu
tab voted [iw=test7]
logit voted age age_sq age_edu
logit voted age age_sq age_edu [iw=test7]
logit voted  q4 age age_sq age_edu [iw=test7]
logit voted  q4 age age_sq age_edu
tab q4
logit voted  q4 age age_sq age_edu [iw=test7] if q4<11
logit voted  q4 age age_sq age_edu if q4<11
logit voted  q4 age age_sq age_edu [iw= wtpre] if q4<11
logit voted  q4 age age_sq age_edu [iw= wtpost] if q4<11
logit voted  q4 age age_sq age_edu [iw= wtpostges] if q4<11
logit voted  q4 age age_sq age_edu [iw= wtpreges] if q4<11
logit voted  q4 age age_sq age_edu [iw= test7] if q4<11
logit voted  q4 age age_sq age_edu [iw= wtpostges ] if q4<11
logit voted  q5 age age_sq age_edu [iw= wtpostges ] if q5<11
logit voted  q5 age age_sq age_edu [iw= test7 ] if q5<11

probit voted  q4 age age_sq age_edu [iw= wtpostges ] if q4<11
probit voted  q4 age age_sq age_edu [iw= test7] if q4<11


***Nov 15
use "C:\Users\Deuta\Desktop\Survey missing data project\uwo_2010_medw_full_weights_2_mod_august_5_DK.dta", clear
logit voted  test7
sum test7
logit voted  test7 age age_sq
logit voted  test7 age age_sq edu
tab1 q4 q5
logit voted  test7 q4 age age_sq edu if q4<99
logit voted  test7 q5 age age_sq edu if q5<99
logit voted  test7 age age_sq edu if q5<99
logit voted  test7 q4 age age_sq edu if q4<99
logit voted   q4 age age_sq edu if q4<99
tab q11
tab q20
tab  q48b
corr test7 q48b if  q48b<3
tab  q48b, nol
corr test7 q48c if  q48c<3
corr test7 q48a if  q48a<3
tab  q49
corr test7 q49 if  q49<3
tab q20
logit voted q20 age age_sq edu if q20<99
logit voted test7 q20 age age_sq edu if q20<99
logit voted test7 q20 age age_sq edu if q20<99, robust
gen test7_q20=test7*q20
logit voted test7 q20 test7_q20 age age_sq edu if q20<99, robust
logit voted test7 q20 test7_q20  if q20<99, robust

***Nov 15 conclusion: basically, justa as with the UK survey, test7 is a significant predictor of reported turnout, even when 
***other important variables are taken into account (not all of them, but still, e.g. not q20="care who forms the gvt"). 


**** NOV 15, late at night: some tests to understand what the IV and what the weight do;
**** see also .docx file.

use "C:\Users\Deuta\Desktop\Survey missing data project\uwo_2010_medw_full_weights_2_mod_august_5_DK.dta", clear
logit voted q5 age age_sq edu if q5<5
tab q5
logit voted q5 age age_sq edu if q5<11
logit voted q5 age age_sq edu if q5<11 [iw=test7]
logit voted q5 age age_sq edu if q5<11 [pw=test7]
logit voted q5 age age_sq edu if q5<11 [pw= wtpostges]
logit voted q5 age age_sq edu if q5<11 [pw= wtpreges]
logit voted q5 age age_sq edu if q5<11 [pw=test7]
logit voted q5 age age_sq edu if q5<11 [pw= wtpostges]
logit voted q5 age age_sq edu if q5<11 [iw= wtpostges]
logit voted q5 age age_sq edu if q5<11 [iw= wtpreges]
logit voted q5 age age_sq edu if q5<11 [iw= wtpostges]
logit voted q5 age age_sq edu if q5<11 [pw= wtpostges]
logit voted q5 age age_sq edu if q5<11
logit voted q5 age age_sq edu if q5<11 [pw= 1/test7]
logit voted q5 age age_sq edu if q5<11 [pw= 1/ wtpostges]
logit voted q5 age age_sq edu if q5<11 [pw= 1/ wtpostges]
logit voted q5 age age_sq edu if q5<11 [pw= wtpostges]
logit voted q5 age age_sq edu if q5<11 [iw= wtpostges]
logit voted q5 test7 age age_sq edu if q5<11
tab voted
tab voted [iw=test7]
tab voted [iw=wtpostges ]
tab voted [aw=wtpostges ]
tab voted [aw=test7 ]
tab voted [aw=wtpreges ]
tab voted [iw=wtpreges ]
logit voted q5 age age_sq edu if q5<11 [iw= wtpostges]
logit voted q5 age age_sq edu if q5<11 [pw= wtpostges]
logit voted q5 age age_sq edu if q5<11 [pw= wtpostges]
logit voted q5 age age_sq edu if q5<11 [pw= wtpostges], robust
logit voted q5 age age_sq edu if q5<11 [iw= wtpostges]
logit voted q5 age age_sq edu if q5<11 [iw= wtpostges], robust
logit voted q5 age age_sq edu if q5<11 [iw= wtpostges]
predict residuals
drop residuals
logit voted q5 age age_sq edu if q5<11
predict double resid, residuals
sum resid
corr resid age age_sq edu
corr resid q5 if q5<11
drop resid
logit voted test7 q5 age age_sq edu if q5<11
predict double resid, residuals
corr resid age age_sq edu test7
drop resid
logit voted q5 age age_sq edu if q5<11
predict double resid, residuals
corr resid age age_sq edu test7
pwcorr resid age age_sq edu test7, sig
pwcorr resid age age_sq edu  wtpostges, sig
logit voted q5 age age_sq edu if q5<11
logit voted q5 age age_sq edu if q5<11 [pw= wtpostges]
logit voted q5 age age_sq edu if q5<11 [pw= test7]
logit voted q5 age age_sq edu if q5<11 [iw= test7]
logit voted q5 age age_sq edu if q5<11 [iw= wtpostges]
logit voted q5 age age_sq edu if q5<11 [iw= wtpostges]
logit voted q5 age age_sq edu if q5<11 [iw=test7]
logit voted q5 age age_sq edu if q5<11 [iw=test7]
logit voted q5 age age_sq edu if q5<11
logit voted test7 q5 age age_sq edu if q5<11
predict p1
logit voted q5 age age_sq edu if q5<11 [iw=test7]
predict p2
logit voted q5 age age_sq edu if q5<11
predict p3
sum p1 p2 p3
sum p1 p2 p3 if voted!=.
sum p1 p2 p3 if voted!=. & edu!=.
sum p1 p2 p3 if voted!=. & edu!=. & age!=.
sum p1 p2 p3 if voted!=. & edu!=. & age!=. & q5<11
corr p1 p2 p3 if voted!=. & edu!=. & age!=. & q5<11
logit voted q5 age age_sq edu if q5<11 [iw=wtpostges ]
predict p4
sum p1 p3 p2 p4 if voted!=. & edu!=. & age!=. & q5<11
corr p1 p3 p2 p4 if voted!=. & edu!=. & age!=. & q5<11
drop  resid p1 p2 p3 p4


****The residuals:

. sum p1 p3 p2 p4 if voted!=. & edu!=. & age!=. & q5<11

    Variable |       Obs        Mean    Std. Dev.       Min        Max
-------------+--------------------------------------------------------
          p1 |       778    .7789203    .1585477   .1333421   .9694276
          p3 |       778    .7789203     .150989   .2393828   .9715383
          p2 |       778    .7270436    .1805204   .1799101   .9761888
          p4 |       778    .5994202    .2121742   .0757501   .9554929

. corr p1 p3 p2 p4 if voted!=. & edu!=. & age!=. & q5<11
(obs=778)

             |       p1       p3       p2       p4
-------------+------------------------------------
          p1 |   1.0000
          p3 |   0.9542   1.0000
          p2 |   0.9314   0.9783   1.0000
          p4 |   0.9183   0.9635   0.9696   1.0000


**p1=model with test7 as IV
**p3=model without test7 at all
**p2=model with test7 as iw weight
**p4=model with wtpostges as weight, no test7 in

***When test7 is IV, estimated residuals are not correlated with the IVs:
. corr resid age age_sq edu test7
(obs=778)

             |    resid      age   age_sq      edu    test7
-------------+---------------------------------------------
       resid |   1.0000
         age |   0.0100   1.0000
      age_sq |   0.0115   0.9860   1.0000
         edu |  -0.0088  -0.1762  -0.1867   1.0000
       test7 |  -0.0073  -0.1902  -0.1881  -0.1364   1.0000

***however, when i estimate the model without test7, the resulting residuals are
***slightly correlated with test7 (-.07), but they are even more correlated with
***wtpostges (.36 or something):


. pwcorr resid age age_sq edu  wtpostges, sig

             |    resid      age   age_sq      edu wtpost~s
-------------+---------------------------------------------
       resid |   1.0000 
             |
             |
         age |   0.0068   1.0000 
             |   0.8503
             |
      age_sq |   0.0098   0.9864   1.0000 
             |   0.7858   0.0000
             |
         edu |   0.0019  -0.1604  -0.1662   1.0000 
             |   0.9584   0.0000   0.0000
             |
   wtpostges |  -0.3619   0.0544   0.0586   0.2100   1.0000 
             |   0.0000   0.1224   0.0961   0.0000

***Other lessons learned: logit works only with iw weight and pw weight, and not with any
***other weight; the dfference being that pw calculates robust std errors; which in my case 
***are higher than the non-robust errors -- question: are they worth it?

***second lesson learned: tab works only with aw and iw, not with pw. 

***
***
***Nov 27. Wave 1 analyses. For the importance of controlling for DK response for some wave 1 analyses. Note that I've saved the file. 

use "C:\Users\Deuta\Desktop\Survey missing data project\Survey missing data project\uwo_2010_medw_full_weights_2_mod_august_5_DK.dta", clear
tab q4
tab q4, nol
gen interest_elect=q4 if q4<90
tab interest_elect
gen itrst_el_x_test1=test1* interest_elect
tab q7a
tab q7a, nol
gen intent_2_vote= q7a if q7a<9
tab intent_2_vote
tab q7a, nol
tab q7a
replace intent_2_vote =6-intent_2_vote
tab intent_2_vote
rename  intent_2_vote  intent_2_vote_q7a
tab q7b
tab q7b, nol
gen intent_2_vote= q7b if q7b<11
tab intent_2_vote
rename  intent_2_vote  intent_2_vote_q7b
reg  intent_2_vote_q7b interest_elect
reg  intent_2_vote_q7b interest_elect  test1
reg  intent_2_vote_q7b interest_elect  test1  itrst_el_x_test1
save "C:\Users\Deuta\Desktop\Survey missing data project\Survey missing data project\uwo_2010_medw_full_weights_2_mod_august_5_DK.dta", replace
